<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=<device-width>, initial-scale=1.0">
    <title>Rock Paper Scissor</title>
</head>
<body>
    <div class="btn-container">
        <button id="rock">Rock</button>
        <button id="paper">Paper</button>
        <button id="scissor">Scissor</button>
    </div>
    Player: <div class="player-score"></div>
    Computer: <div class="computer-score"></div>
    Result: <div class="result"></div>
</body>

<script>
    function getComputerChoice(){
        randomChoice = Math.floor((Math.random() * 3));
        if (randomChoice == 0) {
            return "rock";
        }else if (randomChoice == 1) {
            return "paper";
        }else if (randomChoice == 2) {
            return "scissor";
        }
    }

    /*
    function getPlayerChoice(){

        let playerChoice = "roc";
        
        while (!(playerChoice  == "rock") && !(playerChoice  == "paper") && !(playerChoice  == "scissor")){
            playerChoice = prompt("rock, paper or scisor?");
            playerChoice = playerChoice.toLowerCase();
            console.log(playerChoice);
        }

        return playerChoice.toLowerCase();
        
    }
    */

    //takes player and computer selection, compare them and returns the winner of the round, if any.
    function playRound(){
        const computerSelection = getComputerChoice();
        const result = document.querySelector('.result');
        if (playerSelection == computerSelection) {
            return result.textContent = "Draw!";
        }else if (playerSelection == "rock") {
            if (computerSelection == "paper") {
                cpscore.textContent = ++computerScore;
                if (computerScore > 4){
                    return result.textContent = "You lose!";
                }else {
                    return result.textContent = "You lose! Paper beats rock!";
                }
                
            } else {
                pscore.textContent = ++playerScore;
                if (playerScore > 4){
                    return result.textContent = "You are the winner!";
                }else {
                    return result.textContent = "You win! Rock beats scissor!";
                }
                
            }
        }else if (playerSelection == "paper") {
            if (computerSelection == "rock") {
                pscore.textContent = ++playerScore;
                if (playerScore > 4){
                    return result.textContent = "You are the winner!";
                }else {
                    return result.textContent = "You win! Paper beats rock!";
                }
                
                
            } else {
                cpscore.textContent = ++computerScore;
                if (computerScore > 4){
                    return result.textContent = "You lose!";
                }else {
                    return result.textContent = "You lose! Paper beats rock!";
                }
                return result.textContent = "You lose! Scissor beats paper!";
                
            }
        }else if (playerSelection == "scissor") {
            if (computerSelection == "rock") {
                cpscore.textContent = ++computerScore;
                return result.textContent = "You lose! Rock beats scissor!";
            } else {
                pscore.textContent = ++playerScore;
                if (playerScore > 4){
                    return result.textContent = "You are the winner!";
                }else {
                    return result.textContent = "You win! Scissor beats paper!";   
                }
                               
            }
        }
    }

    let playerScore = 0;
    let computerScore = 0;
    let randomChoice = 0;
    let playerChoice = "";
    let playerSelection = "";

    const pscore = document.querySelector('.player-score');
    pscore.textContent = playerScore;
    const cpscore = document.querySelector('.computer-score');
    cpscore.textContent = computerScore;

    const computerSelection = getComputerChoice();
    const buttons = document.querySelectorAll('button');
    buttons.forEach((button) => {
        button.addEventListener('click', () => {
            playerSelection = button.id;
            if (playerScore < 5 && computerScore < 5){
                playRound(playerSelection, computerSelection);
            }
            
        });
    });

</script>

</html>