<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=<device-width>, initial-scale=1.0">
    <title>Rock Paper Scissor</title>
</head>
<body>
    <script>
        //Randomly generate a choice for the computer
        function getComputerChoice(){
            randomChoice = Math.floor((Math.random() * 3));
            if (randomChoice == 0) {
                return "rock";
            }else if (randomChoice == 1) {
                return "paper";
            }else if (randomChoice == 2) {
                return "scissor";
            }
        }

        //returns prompted player's choice
        function getPlayerChoice(){

            let playerChoice = "roc";
            
            while (!(playerChoice  == "rock") && !(playerChoice  == "paper") && !(playerChoice  == "scissor")){
                playerChoice = prompt("rock, paper or scisor?");
                playerChoice = playerChoice.toLowerCase();
                console.log(playerChoice);
            }

            return playerChoice.toLowerCase();
            
        }

        //takes player and computer selection, compare them and returns the winner of the round, if any.
        function playRound(){
            const playerSelection = getPlayerChoice();
            const computerSelection = getComputerChoice();
            console.log("Player selected " + playerSelection);
            if (playerSelection == computerSelection) {
                return "Draw!";
            }else if (playerSelection == "rock") {
                if (computerSelection == "paper") {
                    ++computerScore;
                    return "You lose! Paper beats rock!";
                } else {
                    ++playerScore;
                    return "You win! Rock beats scissor!";
                    
                }
            }else if (playerSelection == "paper") {
                if (computerSelection == "rock") {
                    ++playerScore;
                    return "You win! Paper beats rock!";
                    
                } else {
                    ++computerScore;
                    return "You lose! Scissor beats paper!";
                    
                }
            }else if (playerSelection == "scissor") {
                if (computerSelection == "rock") {
                    ++computerScore;
                    return "You lose! Rock beats scissor!";
                } else {
                    ++playerScore;
                    return "You win! Scissor beats paper!";                   
                }
            }
        }

        //while less than 5 rounds played, play a round and log player and computer scores. After 5 rounds, call result().
        /*
        function game (){                  
            while (roundCount < 6 ){
                console.log("Round " + roundCount);
                console.log(playRound(playerSelection, computerSelection));
                console.log("Player: " + playerScore + ", " + "Computer:" + computerScore);
                ++roundCount;
            }

            console.log(result());
        }
        */

        //Called after loop inside game() ends. Returns the winner of the game.
        function result(){
            if (roundCount == 6){
                if (playerScore > computerScore){
                    return "You win! Congratulations!";
                }else if (playerScore < computerScore){
                    return "You lose! Try again!";
                }else if (playerScore == computerScore){
                    return "It's a draw! Try again!";
                }
            }

            roundCount = 1;
        }

        

        let playerScore = 0;
        let computerScore = 0;
        let randomChoice = 0;
        let roundCount = 1;
        const playerSelection = "";
        const computerSelection = getComputerChoice();
        // game();
        
    </script>
</body>
</html>